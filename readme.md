# Сервис-ориентированная архитектура

## Лабораторная работа №1.

Разработать спецификацию в формате OpenAPI для набора веб-сервисов, реализующего следующую функциональность:

Первый веб-сервис должен осуществлять управление коллекцией объектов. В коллекции необходимо хранить объекты класса Organization, описание которого приведено ниже:

```java
public class Organization {
    private Long id; //Поле не может быть null, Значение поля должно быть больше 0, Значение этого поля должно быть уникальным, Значение этого поля должно генерироваться автоматически
    private String name; //Поле не может быть null, Строка не может быть пустой
    private Coordinates coordinates; //Поле не может быть null
    private java.time.LocalDate creationDate; //Поле не может быть null, Значение этого поля должно генерироваться автоматически
    private int annualTurnover; //Значение поля должно быть больше 0
    private String fullName; //Строка не может быть пустой, Длина строки не должна быть больше 1678, Поле не может быть null
    private Long employeesCount; //Поле не может быть null, Значение поля должно быть больше 0
    private OrganizationType type; //Поле не может быть null
    private Address officialAddress; //Поле не может быть null
}
public class Coordinates {
    private Integer x; //Максимальное значение поля: 76, Поле не может быть null
    private Integer y; //Значение поля должно быть больше -155, Поле не может быть null
}
public class Address {
    private String zipCode; //Поле может быть null
}
public enum OrganizationType {
    PUBLIC,
    TRUST,
    OPEN_JOINT_STOCK_COMPANY
}
```


Веб-сервис должен удовлетворять следующим требованиям:

- API, реализуемый сервисом, должен соответствовать рекомендациям подхода RESTful.
- Необходимо реализовать следующий базовый набор операций с объектами коллекции: 
    - добавление нового элемента
    - получение элемента по ИД 
    - обновление элемента удаление элемента
    - получение массива элементов
- Операция, выполняемая над объектом коллекции, должна определяться методом HTTP-запроса.
- Операция получения массива элементов должна поддерживать возможность сортировки и фильтрации по любой комбинации полей класса, а также возможность постраничного вывода результатов выборки с указанием размера и порядкового номера выводимой страницы.
- Все параметры, необходимые для выполнения операции, должны передаваться в URL запроса.
- Информация об объектах коллекции должна передаваться в формате json.
- В случае передачи сервису данных, нарушающих заданные на уровне класса ограничения целостности, сервис должен возвращать код ответа http, соответствующий произошедшей ошибке.


Помимо базового набора, веб-сервис должен поддерживать следующие операции над объектами коллекции:

- Сгруппировать объекты по значению поля officialAddress, вернуть количество элементов в каждой группе.
- Вернуть количество объектов, значение поля employeesCount которых больше заданного.
- Вернуть массив объектов, значение поля fullName которых содержит заданную подстроку.

Эти операции должны размещаться на отдельных URL.

---

Второй веб-сервис должен располагаться на URL `/orgmanager`, и реализовывать ряд дополнительных операций, связанных с вызовом API первого сервиса:

- `/merge/{id1}/{id2}/new-name/new-address` : объединить организации, создав новую и зачислив в неё всех сотрудников двух исходных
- `/hire/{id}` : добавить нового сотрудника в организацию с указанным id

Эти операции также должны размещаться на отдельных URL.

---

Для разработанной спецификации необходимо сгенерировать интерактивную веб-документацию с помощью Swagger UI. Документация должна содержать описание всех REST API обоих сервисов с текстовым описанием функциональности каждой операции. Созданную веб-документацию необходимо развернуть на сервере helios.

### Вопросы к защите лабораторной работы:

1. Подходы к проектированию приложений. "Монолитная" и сервис-ориентированная архитектура.
2. Понятие сервиса. Общие свойства сервисов.
3. Основные принципы SOA. Подходы к реализации SOA, стандарты и протоколы.
4. Общие принципы построения и элементы сервис-ориентированных систем.
5. Понятие веб-сервиса. Определение, особенности, отличия от веб-приложений.
6. Категоризация веб-сервисов. RESTful и SOAP. Сходства и отличия, области применения.
7. RESTful веб-сервисы. Особенности подхода. Понятия ресурса, URI и полезной нагрузки (payload).
8. Виды RESTful-сервисов. Интерпретация методов HTTP в RESTful.
10. Правила именования ресурсов в RESTful сервисах.
11. Спецификация RESTful-сервисов. Стандарт OpenAPI.
12. Автодокументирование RESTful-сервисов. Swagger Editor, Swagger UI (и Swagger Codegen).
13. Архитектурный принцип HATEOAS.



## Лабораторная работа №2.

На основе разработанной в рамках лабораторной работы #1 спецификации реализовать два веб-сервиса и использующее их API клиентское приложение.

### Требования к реализации и развёртыванию сервисов:

- Первый ("вызываемый") веб-сервис должен быть реализован на фреймворке JAX-RS и развёрнут в окружении под управлением сервера приложений WildFly.
- Второй веб-сервис должен быть реализован на фреймворке Spring MVC REST, развёрнут в окружении под управлением сервера приложений Jetty и вызывать REST API первого сервиса.
- Для обоих сервисов необходимо реализовать все функции, задокументированные в API, в строгом соответствии со спецификацией!
- Доступ к обоим сервисам должен быть реализован с по протоколу https с самоподписанным сертификатом сервера. Доступ к сервисам посредством http без шифрования должен быть запрещён.


### Требования к клиентскому приложению:

- Клиентское приложение может быть написано на любом веб-фреймворке, который можно запустить на сервере helios.
- Приложение должно обеспечить полный набор возможностей, предоставляемых API обоих сервисов -- включая сортировку, фильтрацию и постраничный вывод элементов коллекции.
- Приложение должно преобразовывать передаваемые сервисами данные в человеко-читаемый вид -- параграф текста, таблицу и т.д.
- Клиентское приложение должно информировать пользователя об ошибках, возникающих на стороне сервисов, в частности, о том, что сервису были отправлены невалиданые данные.
- Оба веб-сервиса и клиентское приложение должны быть развёрнуты на сервере helios.

### Вопросы к защите лабораторной работы:

1. Разработка RESTful сервисов. Языки программирования, фреймворки и библиотеки.
2. RESTful сервисы на платформе Java EE. Технология JAX-RS.
3. Основные и вспомогательные аннотации JAX-RS.
4. Описание ресурсов в JAX-RS.
5. Разработка RESTful веб-сервисов на платформе Spring.
6. Технология Spring Web MVC REST. Отношение к Spring Web MVC, сходства и отличия от JAX-RS.
7. Элементы архитектуры Spring Web MVC: Dispatcher Servlet, Handler Mapping, View Resolver.
8. Аннотации Spring Web MVC.
9. Сериализация / десериализация данных в Spring Web MVC REST.
10. Технология Spring Data REST. Преимущества и недостатки относительно JAX-RS и Spring Web MVC REST.
11. Spring Data REST: стратегии экспорта репозиториев, типы ресурсов, автоматическое описание сервисов.
12. Интеграция веб-сервисов. Настройка защищённого соединения между узлами. Основы криптографии.
13. TLS & SSL. Основные термины.
14. Симметричное и асимметричное шифрование. Приватный и публичный ключи, сертификаты. Генерация сертификатов.
15. Доверенные центры сертификации. Иерархия сертификатов, самоподписанные сертификаты.
16. Настройка защищённого соединения в Java. Доверенные узлы, хранилища сертификатов.
17. Keystore & Truststore. Утилита keytool.

